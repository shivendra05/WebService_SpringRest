package com.example.controller;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.example.model.Product;
import com.example.service.ProductService;

@Controller
public class ProdController {

	@Autowired
	ProductService service;

	@RequestMapping("/productHome")
	public String registerProd() {
		System.out.println("ProdController.registerProd():: Home");
		return "register";
	}

	/*
	 * @RequestMapping(value = "/userRegister", method = RequestMethod.POST)
	 * public String saveData(
	 * 
	 * @ModelAttribute Product prod,//UI to Model
	 * Model model) { //Model to UI
	 * System.out.println("ProdController.saveData()::Save Data");
	 * String msg = service.inserData(prod);
	 * String prodMSg = msg+" with ProductID -->"+prod.getPID();
	 * long rows = service.getRowCount();
	 * model.addAttribute("ProdId", prodMSg);
	 * model.addAttribute("UserData", prod);
	 * model.addAttribute("rowsCount", rows);
	 * return "userData";
	 * }
	 */
	
	@RequestMapping(value = "/userRegister", method = RequestMethod.POST)
	public String getAllData(
			@ModelAttribute Product prod,//UI to Model
			Model model) {	//Model to UI
		List<Product> prodList=null;
		prodList= new ArrayList<Product>()
		System.out.println("ProdController.saveData()::Save Data");
		String msg = service.inserData(prod);
		prodList = service.showAllData();
		String  prodMSg = msg+" with ProductID -->"+prod.getPID();
		long rows = service.getRowCount();
		model.addAttribute("ProdId", prodMSg);
		model.addAttribute("UserData", prod);
		model.addAttribute("rowsCount", rows);
		return "userData";
	}
}
